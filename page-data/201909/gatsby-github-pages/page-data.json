{"componentChunkName":"component---src-templates-blog-post-js","path":"/201909/gatsby-github-pages/","webpackCompilationHash":"3876873f6e4a77c07637","result":{"data":{"site":{"siteMetadata":{"title":"g2blog","author":"ywand"}},"markdownRemark":{"id":"c5793b29-e14b-54e5-93b8-c3a760a864c3","excerpt":"いったん簡易的メモ書きとしておいて、気が向いたら追記予定です。 Node.js、npm、Gitなどのインストールと使い方、 GitHubのアカウント作成については別記事にまとめます。 （GitLabの方でも静的サイト公開が可能らしいのでそっちでも試してみたいですね） 1. Gatsbyインストール npm…","html":"<p>いったん簡易的メモ書きとしておいて、気が向いたら追記予定です。<br>\n<a href=\"https://nodejs.org/ja/\" target=\"_blank\" rel=\"noopener noreferrer\">Node.js</a>、npm、<a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Git</a>などのインストールと使い方、<br>\n<a href=\"https://github.co.jp/\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>のアカウント作成については別記事にまとめます。<br>\n（<a href=\"https://gitlab.com/\" target=\"_blank\" rel=\"noopener noreferrer\">GitLab</a>の方でも静的サイト公開が可能らしいのでそっちでも試してみたいですね）</p>\n<h2>1. Gatsbyインストール</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby\ngatsby new myblog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>\n<p>npmを使用してgatsbyをインストールします。<br>\nその後、<code class=\"language-text\">gatsby new</code>でスターターキットをベースにしてプロジェクトを作成します。<br>\n今回はgatsby-starter-blogをベースに使用しました。<br>\nシンプルな作りでカスタマイズを自分でするタイプのスターターキットです。<br>\n(最初からリッチな物で始めたい時は<a href=\"https://www.gatsbyjs.org/starters/?v=2\" target=\"_blank\" rel=\"noopener noreferrer\">こちらを参考に選択します</a>)</p>\n<h2>2. ローカルでの動作確認</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> myblog\n<span class=\"token function\">npm</span> run develop</code></pre></div>\n<p>package.jsonの中に<code class=\"language-text\">npm run</code>で使えるコマンドが記載されてます。  </p>\n<div class=\"gatsby-highlight\" data-language=\"json:package.json\"><pre class=\"language-json:package.json\"><code class=\"language-json:package.json\">  &quot;scripts&quot;: {\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    ...\n  }</code></pre></div>\n<p><code class=\"language-text\">gatsby develop</code> コマンドを使っても同じみたいですね。<br>\nこれでビルドとローカルサーバーの立ち上げが行われます。<br>\nブラウザから<a href=\"http://localhost:8000/\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8000/</a>にアクセスすると、<br>\nスターターの初期状態のページが表示されるようになりました。  </p>\n<h2>3. サイト情報の修正</h2>\n<div class=\"gatsby-highlight\" data-language=\"js:gatsby-config.js\"><pre class=\"language-js:gatsby-config.js\"><code class=\"language-js:gatsby-config.js\">module.exports = {\n  pathPrefix: &#39;/レポジトリ名&#39;,\n  siteMetadata: {\n    title: `サイトタイトル`,\n    author: `管理者名`,\n    description: `サイト説明`,\n    siteUrl: `https://ユーザー名.github.io/レポジトリ名/`,\n    social: {\n      twitter: `アカウント`,\n    },\n  },\n}</code></pre></div>\n<p><code class=\"language-text\">myblog/gatsby-config.js</code>内のsiteMetadataを自分用に修正します。<br>\nsiteUrlなどを公開用のGitHub Pagesに合わせる形としました。<br>\n<code class=\"language-text\">gatsby new</code>で作成するプロジェクト名とレポジトリ名を合わせておくと楽です。   </p>\n<h2>4。 記事の編集</h2>\n<p><code class=\"language-text\">myblog/content/blog/</code>配下に記事毎のフォルダーがあって、<br>\nmdファイルや画像が格納されている状態です。<br>\nこれをベースに記事などを自分用に作成する形 </p>\n<p><a href=\"http://localhost:8000/\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8000/</a>の画面をいちいちリロードしなくても、<br>\nmdファイルの保存だけでライブプレビュー的に編集できるのが凄く便利です。</p>\n<p>ちなみにフォルダー名やファイル名が直接記事のURL化されるので、<br>\n記事が管理しやすいように、お好みで名前付けとフォルダー分けをします。  </p>\n<h2>5. プロフィールの修正</h2>\n<p><code class=\"language-text\">myblog/src/components/Bio.js</code>でプロフィールを編集します。  </p>\n<p>もしプロフィール表示部分が不要な場合は、<br>\n<code class=\"language-text\">myblog/src/pages/index.js</code>内にある<code class=\"language-text\">&lt;Bio /&gt;</code>というJSXタグを削除すれば、<br>\nページからプロフィールコンポーネントが削除されます。  </p>\n<h2>6. gh-pagesのインストール</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<p><code class=\"language-text\">gh-pages</code>をインストールして、ビルド後の静的ファイルをデプロイできるようにします。  </p>\n<div class=\"gatsby-highlight\" data-language=\"json:package.json\"><pre class=\"language-json:package.json\"><code class=\"language-json:package.json\">  &quot;scripts&quot;: {\n    ...\n    &quot;deploy&quot;: &quot;gatsby build --prefix-paths &amp;&amp; gh-pages -d public&quot;,\n  }</code></pre></div>\n<p><code class=\"language-text\">package.json</code>に追加すると、<code class=\"language-text\">myblog/public</code>内にあるビルド後の静的ファイルが、<br>\ngh-pagesブランチとしてデプロイされるようになります。<br>\n<code class=\"language-text\">gatsby-config.js</code>にpathPrefixを追加しておかないと、<br>\nデプロイ後のサイト内リンクのURLが上手く設定されないので注意が必要です。  </p>\n<h2>7. GitHub Pagesでの公開</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/ユーザー名/レポジトリ名.git\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"new blog with gatsby!\"</span>\n<span class=\"token function\">git</span> push -u origin master\n<span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>masterブランチにGatsbyプロジェクトをプッシュします。<br>\n<code class=\"language-text\">npm run deploy</code>でgh-pagesが動いでgh-pageブランチが作成されます。<br>\n最後に、GitHubのリポジトリ設定からGitHub Pagesの項目を<br>\n<code class=\"language-text\">Source gh-pages branch</code>に設定すると公開完了になります。  </p>","frontmatter":{"title":"GitHub PagesでGatsbyを公開するまでのメモ","date":"2019/09/19","description":"Gatsbyで作ったサイトをGitHub Pagesに公開するまで手順を書き留めておきます。","tags":["Gatsby","GitHub","GitHub Pages"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/201909/gatsby-github-pages/","previous":{"fields":{"slug":"/201909/hello-world/"},"frontmatter":{"title":"hello, world! by Gatsby","tags":["Gatsby"]}},"next":{"fields":{"slug":"/201909/future-updates/"},"frontmatter":{"title":"Gatsbyブログ上に将来的に追加したい機能","tags":["Gatsby","gatsby-starter","WordPress"]}}}}}